import React, { useState } from 'react';
import './VulnerabilityList.css'; // Assuming you will add some CSS for styling
import VulnerabilityCard from './VulnerabilityCard';

const VulnerabilityList = () => {
  // Placeholder data
  const [vulnerabilities, setVulnerabilities] = useState([
    { title: 'Vulnerability 1', description: 'Description 1', level: 'high' },
    { title: 'Vulnerability 2', description: 'Description 2', level: 'medium' },
    { title: 'Vulnerability 3', description: 'Description 3', level: 'low' },
    { title: 'Vulnerability 4', description: 'Description 4', level: 'high' },
    { title: 'Vulnerability 5', description: 'Description 5', level: 'medium' }
  ]);

  const [sortOrder, setSortOrder] = useState('worst-to-best');

  const sortVulnerabilities = (order) => {
    const sortedVulnerabilities = [...vulnerabilities].sort((a, b) => {
      const levels = { high: 3, medium: 2, low: 1 };
      return order === 'worst-to-best'
        ? levels[b.level] - levels[a.level]
        : levels[a.level] - levels[b.level];
    });
    setVulnerabilities(sortedVulnerabilities);
  };

  const handleSortOrderChange = (e) => {
    const order = e.target.value;
    setSortOrder(order);
    sortVulnerabilities(order);
  };

  return (
    <div className="vulnerability-list">
      <div className="sort-controls">
        <label htmlFor="sortOrder">Sort by:</label>
        <select id="sortOrder" value={sortOrder} onChange={handleSortOrderChange}>
          <option value="worst-to-best">Worst to Best</option>
          <option value="best-to-worst">Best to Worst</option>
        </select>
      </div>
      {vulnerabilities.map((vulnerability, index) => (
        <VulnerabilityCard key={index} vulnerability={vulnerability} />
      ))}
    </div>
  );
};

export default VulnerabilityList;